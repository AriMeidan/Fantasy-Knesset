{% extends "base.html" %}
{% load voting %}
{% load static %}
{% load i18n %}

{% block navbar_panel %}
	{% include "register_login_panel.html" %}
{% endblock %}

{% block content %}

<div class="container">

	<input type="text" class="form-control" name="search" id="candidate-search" placeholder="{% trans "Search for candidate" %}">
	<p class="lead">{% trans "Your candidate is not in this list? Add him / her" %} <a href="#">{% trans "here" %}</a></p>

	<div class="panel-group" id="accordion">
		{% for party in parties %}
			<div class="panel panel-default">
				<div class="panel-heading">
					<h4 class="panel-title">
					<a data-toggle="collapse" data-parent="#accordion" href="#{{ party.pk }}">
						{{ party }}
					</a>
					</h4>
				</div>
				<div id="{{ party.pk }}" class="panel-collapse collapse out">
					{% for candidate in party.candidate_set.all %}
						<div class="panel-body row" id="{{ candidate }}">
							<div class="col-xs-9">{{ candidate }}</div>
							<div class="col-xs-3">
								<form role="form" method="post" action="{% url 'votes:vote' %}" >
									{% csrf_token %}
									{% if user|voted_for:candidate %}
										<button class="btn btn-primary btn-block" type="submit" name="method" value="unvote">{% trans "UnVote" %}</button> 
									{% else %}
										<button class="btn btn-default btn-block" type="submit" name="method" value="vote">{% trans "Vote" %}</button>
									{% endif %}
									<input type="hidden" name="candidate_pk" value="{{ candidate.pk }}">
									<input type="hidden" name="next" value="{% url 'votes:candidates' %}" />
								</form>
							</div>
						</div>
					{% endfor %}
				</div>
			</div>
		{% endfor %}
	</div>

</div><!-- /container -->

<!-- Run search script -->
<script src="{% static 'js/search.js' %}"></script>

{% endblock %}